# 🔑 JWT (JSON Web Token)

JWT(JSON Web Token)은 웹 애플리케이션에서 사용자 인증 및 정보 교환을 위해 사용되는 토큰 기반의 인증 방법이다.
JWT는 JSON 포맷을 사용하여 정보를 안전하게 전송하며, 주로 다음과 같은 세 가지 부분으로 구성된다.

#### [헤더_Header]
- **토큰의 타입**과 사용된 **서명 알고리즘**을 나타낸다.
- 일반적으로 alg(algorithm)와 typ(type) 필드를 포함한다.
    - 예를 들어, HMAC SHA256을 사용할 때는 {"alg": "HS256", "typ": "JWT"}와 같은 형식이다.

#### [페이로드_Payload]
- 실제 데이터가 담기는 부분이다.
- 이 데이터는 **클레임(claims)** 이라고 불리며, 사용자에 대한 정보(예: 사용자 ID, 만료 시간 등)를 포함한다.
- 클레임은 등록된 클레임(registered claims), 공유 클레임(public claims), 비공식 클레임(private claims)으로 나눌 수 있다.

#### [서명_Signature]
- 헤더와 페이로드를 조합한 후, 특정 알고리즘과 비밀 키(Secret Key)를 사용하여 생성된 서명이다.
- 서명은 토큰의 무결성을 검증하고, 변조되지 않았는지 확인하는 데 사용된다.
  <br/>

### ✅JWT 토큰 기반 인증
> **JWT(Json Web Token)** : 인증에 필요한 정보들을 암호화시킨 토큰

JWT 토큰 기반 인증은 웹 애플리케이션에서 사용자의 인증 정보를 안전하게 전달하고 관리하기 위한 인증 방식이다.
- JWT는 인증 상태를 유지하기 위해 토큰을 사용하며, 서버와 클라이언트 간의 상태를 유지하지 않는 상태 비저장(stateless) 인증 방법이다.
- 쿠키/세션 방식과 유사하게 JWT 토큰(Access Token)을 HTTP 헤더에 실어 서버가 클라이언트를 식별한다.
<br/><br/>
### ✅ JWT 토큰 기반 인증의 동작 방식
- **[1] 사용자 로그인 요청**
    - 사용자가 로그인 폼에 사용자 이름과 비밀번호를 입력하고 제출한다.

- **[2] 서버의 인증 확인**
    - 서버는 데이터베이스에서 사용자 이름과 비밀번호를 확인하여 인증을 수행한다.

- **[3] JWT 생성**
    - 인증이 성공하면, 서버는 사용자의 정보를 JWT로 암호화하여 생성한다. JWT는 사용자 정보와 함께 서명되어 안전하게 전송된다.

- **[4] JWT 응답**
    - 서버는 클라이언트에게 JWT를 포함한 응답을 보낸다.

- **[5] 토큰 저장 및 전송**
    - 클라이언트는 받은 JWT를 로컬 저장소(예: 브라우저의 localStorage 또는 sessionStorage)에 저장하고, 이후의 요청마다 이 JWT를 HTTP 헤더에 담아 서버에 전송한다.

- **[6] 토큰 검증**
    - 서버는 클라이언트의 요청에서 JWT를 추출하고, 토큰을 검증하여 유효성을 확인한다.

- **[7] 인증된 응답 처리**
    - 토큰이 유효한 경우, 서버는 로그인된 사용자에 따른 적절한 응답을 반환한다.
<br/><br/>
### ✅ JWT 사용 이유
- 로그인 정보를 서버에 저장하지 않고, 클라이언트에 JWT를 저장하여 인증/인가를 수행한다.
- JWT를 사용하는 시스템에서는 모든 서버가 동일한 비밀 키(Secret Key)를 공유해야 한다.
    - 만약 생성 및 검증 비밀 키가 다를 경우, 서명이 일치하지 않아 **잘못된 Signature** 오류가 발생한다.
<br/><br/>
### ✅ JWT 장단점
#### [장점]
- 동시 접속자가 많을 때 서버 측 부하 낮출 수 있다.
- 서버 측 상태를 관리하지 않으므로 확장성과 성능이 향상된다.
- 클라이언트와 서버가 다른 도메인일 때 유용하게 사용된다.

#### [단점]
- 구현 및 관리 복잡도가 증가한다.
- JWT안에 정보를 많이 담게 된다면, JWT의 크기가 커지게 된다.
    - JWT의 크기가 클수록 네트워크 비용이 증가합니다.
- JWT의 일부분만 만료시키거나 갱신하는 것이 어렵다.
- 비밀 키 유출 시 보안 문제가 발생할 수 있다.



<br/>

### [Reference]
- [[Spring Boot] Spring Boot에서 JWT 다루기 (JWT, @Value, @PostConstruct)](https://pixx.tistory.com/270#JWT%C2%A0%ED%86%A0%ED%81%B0%20%EA%B8%B0%EB%B0%98%20%EC%9D%B8%EC%A6%9D%EB%9E%80%E2%9D%93-1)